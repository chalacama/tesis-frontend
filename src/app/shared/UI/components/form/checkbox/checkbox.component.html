<label
  class="chk-wrap"
  [class.only-box]="!ui.title && !ui.ariaLabel"
  [ngClass]="hostClasses()"
  [ngStyle]="cssVars()"
  [attr.id]="ui.id || null"
  [attr.role]="ui.role || 'checkbox'"
  [attr.tabindex]="ui.tabIndex ?? 0"
  [attr.aria-label]="ui.ariaLabel || null"
  [attr.aria-checked]="ariaChecked()"
  [attr.aria-disabled]="ui.disabled ? 'true' : 'false'"
  [attr.title]="ui.title || null"
  (click)="toggleFromUser($event)"
  (keydown)="onKeydown($event)"
>
  <!-- Caja visual -->
  <span class="chk-box">
    <!-- check -->
    <svg *ngIf="!ui.indeterminate && ui.checked" class="chk-mark" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M20.285 6.709a1 1 0 0 0-1.414-1.418l-9.192 9.165-4.55-4.53a1 1 0 1 0-1.414 1.415l5.257 5.236a1 1 0 0 0 1.414 0l9.9-9.868z"/>
    </svg>
    <!-- indeterminate -->
    <svg *ngIf="ui.indeterminate" class="chk-mid" viewBox="0 0 24 24" aria-hidden="true">
      <rect x="5" y="11" width="14" height="2" rx="1"></rect>
    </svg>
  </span>

  <!-- Texto/slot -->
  <span class="chk-label">
    <ng-content></ng-content>
  </span>

  <!-- input real accesible (opcional si quieres enviar en formularios HTML puros) -->
  <input
    type="checkbox"
    class="chk-native"
    [checked]="ui.checked"
    [disabled]="ui.disabled"
    [indeterminate]="ui.indeterminate"
    (change)="$event.stopPropagation(); toggleFromUser($event)"
  />
</label>

<section class="card tab-card">
  <header class="card-header">
    <h3>Información académica</h3>
    <p class="muted">Unidad educativa / Sede</p>
  </header>

  <div class="card-content">
    <div class="form grid-3">
      <!-- Sede -->
      <div class="form-row">
        <label class="label" for="sede">Selecciona una sede</label>
        <select
          [(ngModel)]="selectedSedeId"
          (ngModelChange)="onSedeChange($event)"
          [ngModelOptions]="{ standalone: true }"
          name="sede"
          id="sede"
          required
          class="select">
          <option [ngValue]="null" disabled>Selecciona una sede</option>
          <option *ngFor="let sede of sedes" [ngValue]="sede.id">
            {{ sede.educational_unit.name }} — {{ sede.province }}, {{ sede.canton }}
          </option>
        </select>
        <small class="hint">Elige la sede asociada a tu unidad educativa.</small>
      </div>

      <!-- Carrera (dinámica según sede) -->
      <div class="form-row">
        <label class="label" for="career">Selecciona una carrera</label>
        <select
          [(ngModel)]="selectedCareerId"
          [ngModelOptions]="{ standalone: true }"
          name="career"
          id="career"
          required
          class="select"
          [disabled]="!selectedSedeId || !careers.length">
          <option [ngValue]="null" disabled>Selecciona una carrera</option>
          <option *ngFor="let c of careers" [ngValue]="c.id">
            {{ c.name }}
          </option>
        </select>
        <small class="hint">
          Las carreras dependen de la sede seleccionada.
        </small>
      </div>

      <!-- Educational Level (período / tipo de estudio) -->
      <div class="form-row">
        <label class="label" for="educationalLevel">Selecciona el período / nivel educativo</label>
        <select
          [(ngModel)]="selectedEducationalLevelId"
          (ngModelChange)="onEducationalLevelChange($event)"
          [ngModelOptions]="{ standalone: true }"
          name="educationalLevel"
          id="educationalLevel"
          required
          class="select"
          [disabled]="!selectedSedeId || !educationalLevels.length">
          <option [ngValue]="null" disabled>Selecciona un período / nivel educativo</option>
          <option *ngFor="let el of educationalLevels" [ngValue]="el.id">
            {{ el.name }}{{ el.period ? ' (' + el.period + ')' : '' }}
          </option>
        </select>
        <small class="hint">
          El período define cuántos niveles puedes seleccionar.
        </small>
      </div>

      <!-- Nivel numérico -->
      <div class="form-row">
        <label class="label" for="level">Selecciona tu nivel (1–{{ maxAllowedLevel }})</label>
        <select
          [(ngModel)]="selectedLevel"
          [ngModelOptions]="{ standalone: true }"
          name="level"
          id="level"
          required
          class="select"
          [disabled]="!selectedEducationalLevelId || !levels.length">
          <option [ngValue]="null" disabled>Selecciona un nivel</option>
          <option *ngFor="let lv of levels" [ngValue]="lv">
            Nivel {{ lv }}
          </option>
        </select>
        <small class="hint">
          Máximo permitido para este período: {{ maxAllowedLevel }} niveles.
        </small>
      </div>
    </div>
  </div>

  <footer class="card-footer">
    <button
      type="button"
      class="btn btn-primary"
      (click)="onSubmitEducational()">
      Guardar datos académicos
    </button>
  </footer>
</section>

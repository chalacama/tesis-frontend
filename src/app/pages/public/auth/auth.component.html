<div class="auth-page">
  <div class="auth-card">
    <!-- Panel de portada -->
    <div class="auth-illustration">
      <img
        src="/img/cover/portada-auth.png"
        alt="Portada DigiMentor"
        class="auth-image"
      />
    </div>

    <!-- Panel de formulario -->
    <div class="auth-form-wrapper">
      <div class="auth-form-header">
        <h2>Inicia sesión</h2>
        <p>Usa tu correo y contraseña o continúa con Google.</p>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="auth-form">
        <div class="form-field">
          <label for="email">Correo electrónico</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            placeholder="ejemplo@correo.com"
            [class.invalid]="email.invalid && (email.dirty || email.touched)"
          />
          <div
            class="field-error"
            *ngIf="email.invalid && (email.dirty || email.touched)"
          >
            <span *ngIf="email.errors?.['required']">
              El correo es obligatorio.
            </span>
            <span *ngIf="email.errors?.['email']">
              Ingresa un correo válido.
            </span>
          </div>
        </div>

        <div class="form-field">
          <label for="password">Contraseña</label>
          <div class="password-wrapper">
            <input
              id="password"
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              placeholder="••••••••"
              [class.invalid]="
                password.invalid && (password.dirty || password.touched)
              "
            />
            <button
              type="button"
              class="toggle-password"
              (click)="togglePasswordVisibility()"
              aria-label="Mostrar u ocultar contraseña"
            >
              <span *ngIf="!showPassword"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24"><path fill="currentColor" d="M12 9.005a4 4 0 1 1 0 8a4 4 0 0 1 0-8Zm0 1.5a2.5 2.5 0 1 0 0 5a2.5 2.5 0 0 0 0-5ZM12 5.5c4.613 0 8.596 3.15 9.701 7.564a.75.75 0 1 1-1.455.365a8.504 8.504 0 0 0-16.493.004a.75.75 0 0 1-1.456-.363A10.003 10.003 0 0 1 12 5.5Z"/></svg></span>
              <span *ngIf="showPassword"><svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 16 16"><path fill="currentColor" d="M1.48 1.48a.5.5 0 0 0-.049.65l.049.057l2.69 2.69A6.657 6.657 0 0 0 1.533 8.71a.5.5 0 0 0 .97.242a5.66 5.66 0 0 1 2.386-3.356l1.207 1.207a2.667 2.667 0 0 0 3.771 3.771l3.946 3.946a.5.5 0 0 0 .756-.65l-.049-.057l-4.075-4.076v-.001l-.8-.799l-1.913-1.913h.001l-1.92-1.919v-.001l-.755-.754l-2.871-2.87a.5.5 0 0 0-.707 0Zm5.323 6.03l2.356 2.357A1.667 1.667 0 0 1 6.802 7.51ZM8 3.667c-.667 0-1.314.098-1.926.283l.825.824a5.669 5.669 0 0 1 6.6 4.181a.5.5 0 0 0 .97-.242A6.669 6.669 0 0 0 8 3.667Zm.13 2.34l2.534 2.533A2.668 2.668 0 0 0 8.13 6.006Z"/></svg></span>
            </button>
          </div>
          <div
            class="field-error"
            *ngIf="password.invalid && (password.dirty || password.touched)"
          >
            <span *ngIf="password.errors?.['required']">
              La contraseña es obligatoria.
            </span>
            <span *ngIf="password.errors?.['minlength']">
              Mínimo 6 caracteres.
            </span>
          </div>
        </div>

        <button
          type="submit"
          class="btn-primary"
          [disabled]="isLoading || loginForm.invalid"
        >
          <span *ngIf="!isLoading">Ingresar</span>
          <span *ngIf="isLoading" class="loader"></span>
        </button>
      </form>

      <div class="auth-divider">
        <span></span>
        <p>o continúa con</p>
        <span></span>
      </div>

      <!-- Botón de Google (inspirado en tu ejemplo, pero usando el botón oficial) -->
      <div
        class="google-button-wrapper"
        [class.google-loading]="isGoogleLoading"
      >
        <asl-google-signin-button
            type="standard"
            size="large"
            shape="pill"
            text="continue_with"
            theme="outline"
            logo_alignment="left"
            style="width: 100%;"
          ></asl-google-signin-button>
      </div>

      <p class="auth-helper-text">
        Al continuar aceptas nuestras políticas de uso y privacidad.
      </p>

      <div class="auth-error" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>
    </div>
  </div>
</div>

